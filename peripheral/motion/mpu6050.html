<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_151) on Sun Oct 08 22:41:36 PDT 2017 -->
<title>System&nbsp;Control</title>
<meta charset="utf-8">
<meta name="date" content="2018-04-04">
<meta name="keywords" content="mpu">
<meta name="keywords" content="gyroscope">
<meta name="keywords" content="accelerometer">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
<script type="text/javascript" src="../../syntaxHighlight_js_c/XRegExp.js"></script>
<script type="text/javascript" src="../../syntaxHighlight_js_c/shCore.js"></script>
<script type="text/javascript" src="../../syntaxHighlight_js_c/shBrushCpp.js"></script>
<link href="../../syntaxHighlight_css_c/shCore.css" rel="stylesheet" type="text/css" />
<link href="../../syntaxHighlight_css_c/shThemeDefault.css" rel="stylesheet" type="text/css" />



</head>
<body>
<script>
SyntaxHighlighter.config.strings.expandSource = '+ expand source';
SyntaxHighlighter.config.strings.help = '?';
SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
SyntaxHighlighter.defaults['pad-line-numbers'] = false;
SyntaxHighlighter.defaults['toolbar'] = false;
SyntaxHighlighter.all()
</script>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="bar">
<center><strong>Motion Sensor&nbsp;-&nbsp;MPU&nbsp;6050</strong></center>
</div>
<p class="date"><span class="created-date">Created:2018-03-04</span>&nbsp;&nbsp;<span class="last-modified">Last modified:2018-03-04</span></p>
<div class="catalog">
<ul class="catalogItems">
<li><a href="#mpu6050Intro">Introduction</a></li>
<li><a href="#mpu6050Reference">References</a></li>
</ul>
</div>
<hr>
<div class="contentContainer">
<ol>
<li>
<div class="content" id="mpu6050Intro">
<h3>Introduction</h3>
<p>MPU-6050 is an IMU (Inertial Measurement Unit) that can detect rotation and acceleration. Inside the MPU-6050, it has three independent gyroscopes (angular rate sensors) to detect the rotation happened on the X, Y, Z axis.
    It also has three independent accelerometer sensors on the X, Y, Z asix to detect the accelerations.</p>
<div class="featureList">
<h4>Features</h4>
<ol>
<li>MPU-6050 has a master I2C interface (XDA, XCL) that can be used to connect to a third-party magnetometer.</li>
<li>MPU-6050 only support 400KHz I2C communication (SDA, SCL) with the MCU</li>
<li>I2C address is 110100x, the x is controlled by the AD0 pin (Pin 9). AD0 = 1, x = 1.</li>
<li>It has an internal DMP (digital motion processing) engine to detect 3D gesture and generate interrupts (at INT Pin 12) </li>
<li>Adjustable detection range (-2g, 2g), (-4, 4g), (-8, 8g), and (-16, +16g); (-250, 250 degree pre second), (-500, 500 dps), (-1000, +1000dps), and (-2000, 2000dps)</li>
<li>1024 byte FIFO buffer lets the MCU sleep during the MPU gather data.</li>
</ol>
</div>
<p><img src="./img/pinout.png" width="1000px" height="400px"></p>

<h4>MPU-6000 vs MPU-6050</h4>
<p>MPU-6000 has the SPI interface, but the MPU-6050 does not.</p>
<p>MPU-6050 has a VLOGIC pin that can be used to set the voltage logic.</p>
</div>
</li>
<li>
<div class="content" id="mpu6050Computation">
<h3>Computation</h3>
<p>Gyro and Acceleometer are both used to compute orientation.</p>
<h4>Orientation</h4>
<p>1. Computing orientation from the accelerometer relies on a constantt gravitational pull of 1g. If two acceleorations are 0, then the orientation cannot be computed.</p>
<p>2. Computing orientation from the gyroscope: must first gives the initial angle. <i>a = w*t + a0</i></p>
<h4>Obtain data</h4>
<p>The direct measurements are analog signals, they are converted to 16-bit digital representation by the device itself.</p>
<p>The raw data from gyro and acceleometer is not precise.</p>
<div class="featureList">
<ol>
<li>Accelerometer: sensitive to the linear movement, such as vibration. So it introduce mechanical noise. (长期效果好，短期效果不好: 优于宏观)</li>
<li>Gyro: less sensitive to the linear movement, but has temperature drift problem (温漂).　(短期效果好，长期效果不好: 优于微观)</li>
</ol>
<h4>Sensor Fusion</h4>
<p>Averaging the data that comes from accelerometers and gyroscopes can produce a better estimate of orientation than obtained using 
 accelerometer data alone.</p>
<div class="featureList">
<ol>
<li>Kalman filter (卡尔曼滤波器):</li>
<li>Complementary Filter: <i>Angle_x = 0.98 * (Angle_x + gyro_x * dt) + 0.02 * acc_x</li>
<li>Built-in DMP: It provides the Quaternion.<br>
    + reduce the workload of MCU.<br>
    - sampling frequency is fixed at 200Hz. <br>
    - filtering parameters are fixed.
</li>

<p></p>
</ol>
<h4>Quaternion</h4>

</div>
</li>
</ol>
</div>
    
</body>
</html>
