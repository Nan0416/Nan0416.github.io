<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_151) on Sun Oct 08 22:41:36 PDT 2017 -->
<title>STM32F1&nsbp;Bus</title>
<meta charset="utf-8">
<meta name="date" content="2018-02-09">
<meta name="keywords" content="bus">
<meta name="keywords" content="stm32">
<meta name="keywords" content="amba">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
<script type="text/javascript" src="../../syntaxHighlight_js_c/XRegExp.js"></script>
<script type="text/javascript" src="../../syntaxHighlight_js_c/shCore.js"></script>
<script type="text/javascript" src="../../syntaxHighlight_js_c/shBrushCpp.js"></script>
<link href="../../syntaxHighlight_css_c/shCore.css" rel="stylesheet" type="text/css" />
<link href="../../syntaxHighlight_css_c/shThemeDefault.css" rel="stylesheet" type="text/css" />



</head>
<body>
<script>
SyntaxHighlighter.config.strings.expandSource = '+ expand source';
SyntaxHighlighter.config.strings.help = '?';
SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
SyntaxHighlighter.defaults['pad-line-numbers'] = false;
SyntaxHighlighter.defaults['toolbar'] = false;
SyntaxHighlighter.all()
</script>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="bar">
<center><strong>STM32F1&nbsp;-&nbsp;AMBA &amp; DMA</strong></center>
</div>
<p class="date"><span class="created-date">Created:2018-02-09</span>&nbsp;&nbsp;<span class="last-modified">Last modified:2018-02-09</span></p>
<div class="catalog">
<ul class="catalogItems">
<li><a href="#busIntro">Introduction</a></li>
<li><a href="#busAMBA">AMBA</a></li>
<li><a href="#busClock">Bus Clock</a></li>
<li><a href="#busReference">References</a></li>
</ul>
</div>
<hr>
<div class="contentContainer">
<ol>
<li>
<div class="content" id="busIntro">
<h3>Introduction</h3>
<p>Bus are used in computing device for transferring data. The bus can be used inside a core, inside a Soc, or externally to connect other peripherals.</p>

<h4>Cortex-M3 interfaces</h4>
<p>The cortex-M3 core has the 3 AHB-Lite bus interfaces for I-Code, D-code, system buses, and 2 APB buses, PPB and DAP, for debugging.
<div class="featureList">
<ol>
<li>The three buses along with the DMA bus are connects to a bus matrix as masters.</li>
<li>I-code, D-code can only access memory from 0x00000000 to 0x1FFFFFFF.</li>
<li>Prefetch is always fetch 4 byte (1 word) even if it is 16-bit Thumb. In this case, it pre-fetch two. (mov r0, pc will affect the real pc by a positive offset of 4)</li>
<li>System bus can access 0x20000000 to 0xdfffffff and 0xE0100000 to 0xFFFFFFFF. In the slave side of the bus matrix, it connects two APB bridges that extends two APB bus for connecting peripherals.</li>
<li>The external PPB (privatep peripheral bus) can access 0xe0040000 to 0xe00fffff. It connects the <i>Trace Port interface unit</i> and vendor specific peripherals.</li>
<li>DAP bus connects debug interface blocks such as SWJ-DP or SW_DP.</li>
</ol>
<h4>Inside a STM32F1</h4>
<p>STM32F1's system bus (AHB-lite) connects to two APB buses for on-chip peripherals.</p>
<ol>
<li>
APB1 (low speed peripherals, up to 32MHz) 
</li>
<li>
APB2 (high speed peripherals, up to 72MHz)
</li>
<li>STM32 blocks<br><img src="./img/blockdiagram.png" width="300" height="300"></li>
<li>A general cortex-M3 microcontroller block<br><img src="./img/generalblock.png" width="300" height="300"></li>
</ol>
</div>


</div>
</li>
<li>
<div class="content" id="AMBA">
<h3>AMBA</h3>
<p>Advanced Microcontroller Bus Architecture is a on-chip interconnect bus standard. It defines a set of bus standard used by SoC and ASIC (application-specific IC)</p>
<div class="featureList">
<h4>History</h4>
<ol>
<li>1996, AMBA introduced ASB (Advanced System Bus) and APB (Advanced Peripheral Bus)</li>
<li>1999, AMBA2 added AHB (Advanced High-performace Bus)</li>
</ol>
<p class="starMark">* The new AMBA is AMBA 5</p>
</div>
</div>
</li>
<li>
<div class="content" id="busClock">
<h3>Bus clock</h3>
<p>Different from AVR 8-bit microcontroller, STM32 Bus's clock can be configured independently. [see clock note]</p>
<p>In the perspective of core, buses are just peripherals. Peripheral may need drivers. For example, a PC bus, such as PCI, also needs a driver. But the AMR AHB-Lite and APB do not require.</p>
</div>
</li>
<li>
<div class="content" id="busReference">
<h3>References</h3>
<div class="featureList">
<ol>
<li><a href="../readings/ARM-AMBA.pdf" target="_blank">AMR AHB-Lite reference</a></li>
</ol>
</div>
</div>
</li>
</ol>
</div>
    
</body>
</html>
