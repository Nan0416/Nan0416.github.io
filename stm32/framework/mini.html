<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_151) on Sun Oct 08 22:41:36 PDT 2017 -->
<title>Programming&nbsp;Minimum C program</title>
<meta name="date" content="2018-01-20">
<meta name="keywords" content="stm32">
<meta name="keywords" content="stm32CubeMX">
<meta name="keywords" content="microcontroller">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
</head>
<body>

<!-- ========= START OF TOP NAVBAR ======= -->
<div class="bar">
<center><strong>Programming&nbsp;-&nbsp;Minimum&nbsp;C&nbsp;program</strong></center>
</div>
<p class="date"><span class="created-date">Created:2018-01-20</span>&nbsp;&nbsp;<span class="last-modified">Last modified:2018-02-08</span></p>
<div class="catalog">
<ul class="catalogItems">
<li><a href="#miniIntro">Introduction</a></li>
<li><a href="#miniFiles">File organization</a></li>

</ul>
</div>
<hr>
<div class="contentContainer">
<ol>
<li>
<div class="content" id="miniIntro">
<h3>Introduction</h3>
<p>The example in this note is generated by STM32CubeMX, but it is cut by removing the unnessary header files. Under the STM32CubeMX toolchain/IDE, select the Makefile option, and only copy the necessary library files.</p>
<p class="starMark">* The makefile generated by STM32CubeV1.0 version 4.23.0 has some mistakes, it has duplicated .c file in the src_dir.</p>
<p>The example in this note is just toggle the nucleo-64 on board user led. It does not involve any interrupt.</p>
<p><a href="./BlinkyMiniC.tar.gz">Download the source code</a></p>
<p>The files contains a Makefile, a include directory and a source directory. Host OS is ubuntu 16.04LTS.</p>
</div>
</li>
<li>
<div class="content" id="miniFiles">
<h3>File organization
</h3>
<div class="featureList">
<ol>
<li>include/core_cm3.h: define the Cortex-M3 core, NIVC, debug and core components.</li>
<li>include/cmsis_gcc.h: define __asm assembly instructions that can be realized by gcc.</li>
<li>include/stm32f10x.h: define stm32f10x series peripheral registers and data structures for accessing them.</li>
<li>include/system_stm32f10x.h: define the function signature for system clock configuration.</li>
<li>Src/main.c: the main program.</li>
<li>Src/system_stm32f10x.c: implement the functions defined in system_stm32f10x.h</li>
<li>Src/startup_stm32f103xb.s: define the reset handler, which is the entry point after reset. (The entry point for the device is the reset handler, not the main function. This is true for all MCU, includes the atmega328p).</li>
<li>Src/STM32F103RBTx_FLASH.ld: a linker script that used by the linker to link the program at correct position. For example, it declares a memory section called flash that starts from 0x08000000 and has 128K length. Moreover, it puts the .isr_vector, .text (code) into the section.</li>
</ol>
<p class="starMark">* The core_cm3.h and stm32f10x.h are slightly different from the source file provided by stm32Cube, it excludes those unnecessary header files.</p>
<p>The most necessary files are marked with green background.</p>
<p><img src="./img/important.png" width="800" height="380"></p>
</div>
</div>
</li>
</ol>
</div>
    
</body>
</html>
