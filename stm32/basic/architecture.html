<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_151) on Sun Oct 08 22:41:36 PDT 2017 -->
<title>Basic&nbsp;Architecture</title>
<meta name="date" content="2017-01-17">
<meta name="keywords" content="architecture">
<meta name="keywords" content="arm">
<meta name="keywords" content="cortex-m">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
</head>
<body>

<!-- ========= START OF TOP NAVBAR ======= -->
<div class="bar">
<center><strong>Basic&nbsp;-&nbsp;Architecture</strong></center>
</div>
<div class="catalog">
<ul class="catalogItems">
<li><a href="#archIntro">Introduction</a></li>
<li><a href="#archARMv7-M">ARMv7-M</a></li>
<li><a href="#archApp">Application level programming</a></li>
<li><a href="#archSys">System level programming</a></li>
<li><a href="#archReference">References</a></li>
</ul>
</div>
<hr>
<div class="contentContainer">
<ol>
<li>
<div class="content" id="archIntro">
<h3>Introduction</h3>
<p>The Architecture of a processor defines the instruction set, #registers and functions, memory model, whether having hardware mulitplication and division, whether supporting cache, MPU, TCM.</p>
</div>
</li>
<li>
<div class="content" id="archARMv7-M">
<h3>ARMv7-M</h3>
<div class="featureList">
<ol>
<li>Instruction set: only support Thumb instruction with Thumb-2 technology. (No ARM instruction set)</li>
<li>Register:
    <p>ARM-core register:</p>
    <ul>
        <li>13 * 32-bit general-purpose registers (R0-R12)</li>
        <li>2 SP stack pointers</li>
        <li>LR link register</li>
        <li>PC program counter</li>
        <li>status register</li>
        <li>mask registers: managing the prioritization scheme for exceptions and interrupts</li>
        <li>control register (CONTROL): identify the current stack and thread mode privilege level.</li>
    </ul>
    <p>Application Program Status Register:</p>
    <ul>
        <li>APSR</li>
    </ul>
</li>
<li>privilege mode: Privileged/unprivileged execution (e.g. mode bit)</li>
<li>operation mode: Thread/hanlder mode. Thread mode:</li>
<li>Memory mode: A memory mapped architecture.	Memory-Mapped architecture: the same address space maps to ROM, registers, RAM, and peripheral I/O</li>
</ol>
</div>
<h4>Hierachical manner</h4>
<p>Different from most of 8-bit microcontroller, like atmega 328p, ARMv7-M is more complicated and sophisticated. The hardware of ARMv7-M has two operating level, application level and system level. The concept of level is directly support by hardware instead of virtual levels provided by software.
The distinction between application level and system level is the access of instruction and memory. Because of this, the programming can also be divided into two different levels.
</p>
</div>
</li>
<li>
<div class="content" id="archSys">
<h3>System level programming</h3>
<div class="featureList">
<ol>

<li>
<h3>Memory</h3>
<p>ARMv7-M is a memory mapped architecture. The address space ranges from 0x00000000 to 0xffffffff (2^32 4GB). The whole space is paritioned as 8 * 0.5GB paritions.
 The address space 0xE0000000 to 0xFFFFFFFF (2^29 512MB) is reserved for system level use. </p>
 <p class=starMark>* Atmega328p is a independent memory layout that flash, SRAM and EEPROM have independent address space.</p>
 <p>To protected application level code to access privileged range, a MPU is required. The ARMv7-M define a Protected Memory System Architecture (PMSAv7) to do that, but it is optional.</p>
<p>Endian:</p>
<p></p>
<div class="featureList">
<h4>SCS (System control space)</h4>
<p>This region is a system configuration region.</p>
<ol>
<li>CPU ID registers</li>
<li>General control and configuration (including the vector table base address)</li>
<li>System handler support (for system interrupts and exceptions)</li>
<li>A SysTick system timer</li>
<li>A Nested Vectored Interrupt Controller (NVIC), supporting up to 496 discrete external interrupts. All exceptions and interrupts share a common prioritization model</li>
<li>Fault status and control registers</li>
<li>The Protected Memory System Architecture (PMSAv7), the MPU is optional when implementing the ARMv7-M</li>
<li>Processor debug</li>
</ol>
</div>
<h4>Memory Maps</h4>
<p><img src="./img/memoryMap.png" width="600" height="650"></p>
</li>
<li>

<h3>Exception</h3>
<p class="starMark">Interrupt is one type of exception</p>
</li>
</ol>
</div>
</div>
</li>
<li>
<div class="content" id="archApp">
<h3>Application level programming</h3>

</div>
</li>
<li>
<div class="content" id="archReference">
<h3>References</h3>
<div class="featureList">
<ol>
<li><a href="./ARMv7-M_ARM.pdf" target="_blank">ARMv7-M architecture reference manual</a></li>
<li><a href="http://blog.csdn.net/wangyin159/article/details/38058331" target="_blank">Execution mode</a></li>
</ol>
</div>
</div>
</li>
</ol>
</div>
    
</body>
</html>
