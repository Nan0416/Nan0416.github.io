<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_151) on Sun Oct 08 22:41:36 PDT 2017 -->
<title>STM32</title>
<meta charset="utf-8">
<meta name="date" content="2018-01-19">
<meta name="keywords" content="stm32">
<meta name="keywords" content="nucleo">
<meta name="keywords" content="cortex-m">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
</head>
<body>

<!-- ========= START OF TOP NAVBAR ======= -->
<div class="bar">
<center><strong>STM32</strong></center>
</div>
<div class="catalog">
<p class="date"><span class="created-date">Created:2018-01-19</span>&nbsp;&nbsp;<span class="last-modified">Last modified:2018-01-19</span></p>
<ul class="catalogItems">
<li><a href="#stm32Intro">Introduction</a></li>
<li><a href="#stm32F103RBT6">STM32F103RBT6</a></li>
<li><a href="#stm32Nucleo64">STM32F103 Nucleo-64</a></li>
<li><a href="#stm32References">References</a></li>
</ul>
</div>
<hr>
<div class="contentContainer">
<ol>
<li>
<div class="content" id="stm32Intro">
<h3>STM32</h3>
<p>The STM32 is a family of 32-bit Flash microcontrollers based on the ARM® Cortex®-M processor. Naming convention is introduced in the <a href="../summary.html">summary</a> section.</p>
<p>The devices in the family can be categorized according to the performance, and core-series.</p>
<div class="termnology">
<h4>Performance [1]</h4>
<ul>
<li>high performance: F2 (120MHz), F4 (180MHz), F7 (216MHz), H7 (400MHz).</li>
<li>mainstream: F0 (48MHz), F1 (72MHz), F3 (72MHz)</li>
<li>low-power: L0 (32MHz), L1 (32MHz), L4 (80MHz), L4+ (120MHz)</li>
</ul>
</div>
<p>F1 series can be categorized according to their flash size</p>
<div class="termnology">
<h4>Density (flash)</h4>
<ul>
<li>low-density: F101, F102, F103 flash size = 16 - 32KB.</li>
<li>meduim-density: F101, F102, F103 flash size = 64 - 128KB.</li>
<li>High-density:  F101, F102, F103 flash size = 256 - 512KB.</li>
<li>XL-density:  F101, F102, F103 flash size =  768 - 1024KB.</li>
<li>Connectivity-line: F105 and F107. Their clock and peripherals are slightly different from other f1 series.</li>
</ul>
</div>
</div>
</li>
<li>
<div class="content" id="stm32F103RBT6">
<h3>STM32F103RBT6</h3>
<h4>Memory</h4>
<p>STM32F103RB has 20KB SRAM and 128KB Flash memory. The memory map is shown below:</p>
<p><img src="./img/stm32MemoryMap.png" width="700" height="800"></p>
<div class="featureList">
<h4>Important address</h4>
<ol>
<li>0x08000000: store the initial value of (main?) stack pointer.</li>
<li>0x08000004: store the address of reset handler. JMP reset_hanlder?</li>
<li>0x20000000: SRAM start point.</li>
</ol>
</div>
<p>Important address: </p>

<h4>Packing</h4>
<p>The chip used in this note is F103RBT6 built on the nucleo-64 board.</p>
<div class="featureList">
<h4>Packing Type [2]</h4>
<ol>
<li><p>DIP</p><p><img src="./img/dip.jpeg" width="200" height="160"></p></li>
<li><p>LQFP</p><p><img src="./img/lqfp.jpg" width="200" height="160"></p></li>
<li><p>TFBGA</p><p><img src="./img/tfbga.jpeg" width="200" height="160"></p></li>
</ol>
</div>
<h4>STM32F103RB</h4>
<p>20KB SRAM, 128 KB Flash, up to 72MHz, single-cycle hardware multiplication/division, 2.0-3.6V power supply.[3]</p>
</div>
</li>
<li>
<div class="content" id="stm32Nucleo64">
<h3>STM32F103 Nucleo-64</h3>
<h4>Functions [5]</h4>
<p><img src="./img/nucleo.png" width="600" height="550"></p>
<h4>Components</h4>
<p><img src="./img/layout-nucleo.png" width="600" height="550"></p>
<h4>Using the embedded st-link programmer to program an external device.</h4>
<p style="color:red;">TO DO</p>

<div class="featureList">
<h4>Power supply</h4>
<ol>
<li>ST-LINK usb power supplied: JP5 on and JP1 off: no more than 300mA; JP5 on and JP1 on: no more than 100mA in case the PC cannot supply more than 100mA.</li>
<li>VIN: JP1 off, JP5 E5V on: (input 7-12V): connect cn6 pin 8 or cn7 pin 24, no more than 800mA</li>
<li>E5V: JP1 off, JP5 E5V on: (input 4.75V-5.25V): connect cn6 pin 8 or cn7 pin 24, no more than 500mA</li>
<li>+3.3V: </li>
</ol>
<p class="starMark">* order of connection is important</p>
<p>Measuring power consumption: remove JP6 and connect to a ammeter</p>
</div>
<div class="featureList">
<h4>ST-Link virtual COM</h4>
<p>stlink provides a virtual serial port. After connect the stlink to a PC via usb, it will virtualize a serial port that can be accessed by the PC.</p>
<p>The serial port has RX/TX connector on the st-link part. It hard wired connnects to the USART2 (PA2/PA3). So when using uart2 to communicate, no extra hardware is needed.</p>
<p>The virtual com can also be used with uart1 or uart3 by connecting its connector to the corresponding pins on the target board side.</p>
<ol>
<li>ST-LINK usb power supplied: JP5 on and JP1 off: no more than 300mA; JP5 on and JP1 on: no more than 100mA in case the PC cannot supply more than 100mA.</li>
<li>VIN: JP1 off, JP5 E5V on: (input 7-12V): connect cn6 pin 8 or cn7 pin 24, no more than 800mA</li>
<li>E5V: JP1 off, JP5 E5V on: (input 4.75V-5.25V): connect cn6 pin 8 or cn7 pin 24, no more than 500mA</li>
<li>+3.3V: </li>
</ol>
<p class="starMark">* order of connection is important</p>
<p>Measuring power consumption: remove JP6 and connect to a ammeter</p>
</div>
<h4>Clock source</h4>
<p>MCO from ST-LINK: MCO output of ST-LINK MCU is used as input clock</p>
<h4>Pinout</h4>
<p><img src="./img/pinout.png" width="600" height="550"></p>
</div>
</li>
<li>
<div class="content" id="stm32Reference">
<h3>References</h3>
<div class="featureList">
<ol>
<li><a href="http://www.st.com/en/microcontrollers/stm32-32-bit-arm-cortex-mcus.html" target="_blank">STM32 32-bit ARM Cortex MCUs</a></li>
<li><a href="http://www.360doc.com/content/15/1210/09/2428535_519276428.shtml" target="_blank">芯片封装大全</a></li>
<li><a href="../readings/stm32f103xb_summary.pdf">STM32F103xB Summary</a></li>
<li><a href="../readings/stm32f103_complete.pdf">STM32F103 Complete</a></li>
<li><a href="../readings/nucleo-64.pdf">Nucleo-64</a></li>
</ol>
</div>
</div>
<h4></h4>
</li>
</ol>
</div>
    
</body>
</html>
