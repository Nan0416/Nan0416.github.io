<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_151) on Sun Oct 08 22:41:36 PDT 2017 -->
<title>ASM&nbsp;GNU-AS</title>
<meta charset="utf-8">
<meta name="date" content="2017-12-28">
<meta name="keywords" content="assembler">
<meta name="keywords" content="gnu-as">
<meta name="keywords" content="at&amp;t&nbsp;syntax">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
</head>
<body>

<!-- ========= START OF TOP NAVBAR ======= -->
<div class="bar">
<center><strong>ASM&nbsp;-&nbsp;GNU-AS</strong></center>
</div>
<p class="date"><span class="created-date">Created:2018-01-21</span>&nbsp;&nbsp;<span class="last-modified">Last modified:2018-01-21</span></p>
<div class="catalog">
<ul class="catalogItems">
<li><a href="#asIntro">Introduction</a></li>
<li><a href="#asTerm">Concepts</a></li>
<li><a href="#asNASM">NASM syntax</a></li>
<li><a href="#asDirectives">Directives</a></li>
<li><a href="#asMacro">Macro</a></li>
<li><a href="#asReferences">References</a></li>
</ul>
</div>
<hr>
<div class="contentContainer">
<ol>
<li>
<div class="content" id="asIntro">
<h3>Introduction</h3>
<p>GNU-AS is a family of assembly for different platforms. For example, there is a gnu-as for intel x86 and a gnu-as (avr-as) for avr microcontrollers. They may have a few different command-line arguments. For example, avr-as has the -mmcu argument to select the target device type. However,
 they have a lot of common directives and same syntax.</p>
</div>
</li>
<li>
<h3>Concepts</h3>
<div class="terminology">
<h4>Terms</h4>
<ul>
<li><p>Directives [pseudo-ops]: (e.g. .text) are commands that are part of the assembler syntax but are not related to the any instruction set. 
All assembler directives begin with a period (.) But different assemblers may have different directives. e.g. both avrasm and avr-as are used to
compile the assmebly code for avr devices, but they have a few different directives. <a href="http://ftp.gnu.org/old-gnu/Manuals/gas/html_chapter/as_7.html" target="_blank">GNU-AS directives reference.</a></p></li>
<li><p>Labels: (e.g. main:) locates the address of a piece of code.</p>
    <pre>
        1).symbolic label: A symbolic label e.g. L2 or .L2 
                            It can only defined only once. 
                            Symbolic labels without prefix . are in global scope and appear in the object file's symbol table.
                            Symbolic labels with . are in local scope and do not appear in the object file's symbol table.
        2). numeric label: a number from 0 to 9, inclusive. They are in local scope and do not appear in the object file's symbol table.
            e.g. 
        <div class="asm" style="margin-right:300px">
            <pre>
    1: 				;define a numeric label 1
        mov r1, r2
        brne 1b		;1b (before) jump to the nearest label 1 define before here. The first
        jmp 1f		;1f (forward) jump to the nearest label 1 define after here. The second
    1:				;define the numeric label 1 again
        mov
            </pre>
        </div>
            
    </pre>
</li>
</ul>
</div>
</li>
<li>
<div class="content" id="asNASM">
<h3>NASM</h3>
<p style="color:red">TO DO</p>
</div>
</li>
<li>
<div class="content" id="asDirectives">
<h3>Directives</h3>
<div class="featureList">
<ol>
<li>
<p>.text (name code section): define the start of a section of code.</p>
<p>A executable can have several code sections that goes to different  locations in the executable. For example, the cortex-m3 requires isr_handler section and main program section.
The code under .text belongs to the same .text section. Using ".text" by itself tells the assembler that the following code goes in the default section.</p>
</li>
<li><p>.section name: assemble the following code into a section named name
</p><p>.text is same as .section .text</p></li>
<li>
<p>.global [.globl] symbol (declare a symbol as global): This make the symbol as global, it means that other .s files and the linker can see the 
file. A symbol can either a label or Because the linker takes the main function as entry point, it is necessary to declare the main as global.</p>
</li>
<li>
<p>.equ symbol, expression (declare a symbol as the value of expression) like a macro</p>
<p>.set symbol, expression : same as equ </p>
<p>.equiv symbol, expression : same as equ, but when define twice, the assembler will report an error.</p>
</li>
<li>
<p>.include "file.inc"</p>
<p>This directive includes a supporting file (which is also a assembly file but may end with .inc) at the point when reaching it. It is same as copy and paste the entire included file at the include
directive point.</p>
<p>The search path can be set use -I (a command-line argument)</p>
<div class="asm">
    <pre>
    ; the three instructions in one file
    mov r18, 12
    mov r19, r18
    mov r17, r19
    </pre>
</div>
<div class="asm">
    <pre>
    ; the three instructions are put in 2 files
    mov r18, 12
    .include "./external.inc"
    mov r17, r19
    </pre>
</div>
<div class="asm">
    <pre>
    ; filename is external.inc
    mov r19, r18
    </pre>
</div>
</li>
<li>
<p>.file (for debugging)</p>
</li>
<li>
<p>.def (for debugging)</p>
</li>
</ol>
</div>
</div>
</li>
<li>
<div class="content" id="asMacro">
<h3>Macro</h3>
<p>A set of instruction represented by a single statement. A macro can be seen as a new instruction created by the programmer for the microcontroller.</p>
<div class="asm">
    <pre>
    .MACRO        LSP	init=0x0020
        LDI    r17, lo8(\init)
        OUT    SPL, r17
        LDI    r17, hi8(\init)
        OUT    SPH, r17
    .ENDM
    </pre>
</div>
</div>
</li>
<li>
<div class="content" id="asReference">
<h3>Reference</h3>
<div class="featureList">
<ol>
<li><a href="https://en.wikibooks.org/wiki/X86_Assembly/GAS_Syntax" target="_blank">GAS syntax</a></li>
<li><a href="http://www.cs.virginia.edu/~evans/cs216/guides/x86.html" target="_blank">x86 assembly guide</a></li>
</ol>
</div>
</div>
</li>
</ol>
</div>
    
</body>
</html>
