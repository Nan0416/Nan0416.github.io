<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_151) on Sun Oct 08 22:41:36 PDT 2017 -->
<title>Java&nbsp;JSONObject</title>
<meta charset="utf-8">
<meta name="date" content="2018-09-17">
<meta name="keywords" content="java">
<meta name="keywords" content="json">
<meta name="keywords" content="JSONObject">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
<script type="text/javascript" src="../../syntaxHighlight_js_c/XRegExp.js"></script>
<script type="text/javascript" src="../../syntaxHighlight_js_c/shCore.js"></script>
<script type="text/javascript" src="../../syntaxHighlight_js_c/shBrushCpp.js"></script>
<script type="text/javascript" src="../../syntaxHighlight_js_c/shBrushJava.js"></script>
<script type="text/javascript" src="../../syntaxHighlight_js_c/shBrushJScript.js"></script>
<script type="text/javascript" src="../../syntaxHighlight_js_c/shBrushBash.js"></script>
<link href="../../syntaxHighlight_css_c/shCore.css" rel="stylesheet" type="text/css" />
<link href="../../syntaxHighlight_css_c/shThemeDefault.css" rel="stylesheet" type="text/css" />

<script src="https://d3js.org/d3.v4.min.js"></script>

</head>
<body>
<script>
SyntaxHighlighter.config.strings.expandSource = '+ expand source';
SyntaxHighlighter.config.strings.help = '?';
SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
SyntaxHighlighter.defaults['pad-line-numbers'] = false;
SyntaxHighlighter.defaults['toolbar'] = false;
SyntaxHighlighter.all()
</script>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="bar">
<strong>Java&nbsp;-&nbsp;JSONObject</strong>
</div>
<p class="date"><span class="created-date">Created:2018-09-17</span>&nbsp;&nbsp;<span class="last-modified">Last modified:2018-09-17</span></p>
<div class="catalog">
<ul class="catalogItems">
<li><a href="#intro">org.json.*</a></li>
<li><a href="#reference">References</a></li>
</ul>
</div>
<hr>
<div class="contentContainer">
<ol>
<li>
<div class="content" id="intro">
<h3>org.json.*</h3>
<p>Parsing string into json object, and json object into string.</p>
<p>Important class: JSONObject, JSONArray</p>
<div class="featureList">
    <ol>
        <li>JSONObject: construction and usage.
            <p>
                <span style="color:green">String -> JSONObject; JSONObject -> String; Java Object -> JSONObject; </span>
                <span style="color:red">Not JSONObject -> Java Object [Other Java JSON library can do. e.g. Jackson]</span>
            </p>
            <div>
                <p>Constructor: create a JSONObject with a json string, or Java Bean, or a Java Object using reflection to get public fields, or a map, or a JSONTokener.</p>
                <p>Get: get field's value from the JSONObject, and automatically type convert. .getString(), .getBoolean()
                    <br><span style="color:red">If a field is not found or type conversion is failed, "JSONException" is thrown</span>
                </p>
                <p>Opt: get a field if it exist, otherwise return null. Don't throws exceptions.

                </p>
                <p>Put: set a field with a value. .put(String, String), .put(String, Boolean)</p>
                <pre class="brush:java">
                    
                public class JSONObjectTest {
                    public static void main(String [] args){
                        // constructure from a string.
                        JSONObject j1 = new JSONObject("{name:'Nan Qin', 'gender':true}"); 
                        System.out.println(j1.getString("name"));
                        System.out.println("Gender: " + (j1.getBoolean("gender")? "Male":"Female"));
                        
                        // constructure from a Java bean
                        // A java bean class is a class that has standard get/set method. 
                        // JSONObject use this convention to call the getXxx method and set key and value. 
                        // If the getXxx return null, the value is ignored.
                        // The DataBean must be defined in a separate file with public access.
                        DataBean d= new DataBean();
                        JSONObject j2 = new JSONObject(d); // create from a java bean object
                        System.out.println(j2);
                        
                        Data d2 = new Data();
                        JSONObject j3 = new JSONObject(d2, new String[]{"success", "reasons", "value"});
                        System.out.println(j3);
                        System.out.println(j3.get("reasons").getClass());
                        if(j3.get("reasons") instanceof String[]){
                            System.out.println("true");
                        }

                    }
                }

                //////// Java bean //////
                package json.orgjson;
                import org.json.JSONPropertyName; // A new feature of 201808 version.... 
                public class DataBean {
                    private boolean success;
                    private String [] reasons;
                    private Object value;

                    public DataBean(){
                        this.success = false;
                        this.reasons = new String[0];
                        this.value = null;
                    }
                    public void setSuccess(boolean success){
                        this.success = success;
                    }

                    public boolean isSuccess(){
                        return this.success;
                    }
                    public void setReasons(String [] reasons){
                        this.reasons = reasons;
                    }
                    @JSONPropertyName("reason") // this annotation modified the key.
                    public String [] getReasons(){
                        return this.reasons;
                    }
                    public void setValue(Object obj){
                        this.value = obj;
                    }
                    public Object getValue(){
                        return this.value;
                    }
                }

                ////////// java object instance of java bean ///////
                /// only access the public members 
                public class Data{
                    public boolean success;
                    public String [] reasons;
                    public Object value;
                
                    public Data(){
                        success = false;
                        reasons = new String [0];
                        value = null;
                    }
                    public void setSuccess(boolean success) {
                        this.success = success;
                    }
                    public void addReason(String reason){
                        reasons = Arrays.copyOf(reasons, reasons.length + 1);
                        reasons[reasons.length - 1] = reason;
                    }
                    public void setValue(Object x){
                        this.value = x;
                    }
                }

                </pre>
            </div>
            <div>
            </div>
        </li>
        <li>JSONTokener: constructor can take input stream/reader.

        </li>
    </ol>
</div>
</div>
</li>
<li>
<div class="content" id="reference">
<h3>References</h3>
<div class="featureList">
    <ol>
        <li><a href="https://www.baeldung.com/java-org-json" target="_blank">Introduction to JSON org.json</a></li>
        <li><a href="https://search.maven.org/classic/#search%7Cgav%7C1%7Cg%3A%22org.json%22%20AND%20a%3A%22json%22" target="_blank">Maven central repo</a></li>
        <li><a href="./jars/json-20180813.jar" target="_blank">json-20180813.jar</a></li>
        <li><a href="./docs/org.json/index.html" target="_blank">Doc</a></li>
    </ol>
</div>
</div>
</li>
</ol>
</div>
    
</body>
</html>
