<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_151) on Sun Oct 08 22:41:36 PDT 2017 -->
<title>Mongodb Mongodb</title>
<meta charset="utf-8">
<meta name="date" content="2018-04-07">
<meta name="keywords" content="database">
<meta name="keywords" content="nosql">
<meta name="keywords" content="mongodb">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
<script type="text/javascript" src="../../syntaxHighlight_js_c/XRegExp.js"></script>
<script type="text/javascript" src="../../syntaxHighlight_js_c/shCore.js"></script>
<script type="text/javascript" src="../../syntaxHighlight_js_c/shBrushCpp.js"></script>
<script type="text/javascript" src="../../syntaxHighlight_js_c/shBrushJava.js"></script>
<script type="text/javascript" src="../../syntaxHighlight_js_c/shBrushJScript.js"></script>
<script type="text/javascript" src="../../syntaxHighlight_js_c/shBrushBash.js"></script>
<link href="../../syntaxHighlight_css_c/shCore.css" rel="stylesheet" type="text/css" />
<link href="../../syntaxHighlight_css_c/shThemeDefault.css" rel="stylesheet" type="text/css" />



</head>
<body>
<script>
SyntaxHighlighter.config.strings.expandSource = '+ expand source';
SyntaxHighlighter.config.strings.help = '?';
SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
SyntaxHighlighter.defaults['pad-line-numbers'] = false;
SyntaxHighlighter.defaults['toolbar'] = false;
SyntaxHighlighter.all()
</script>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="bar">
<center><strong>Mongodb&nbsp;-&nbsp;Mongodb</strong></center>
</div>
<p class="date"><span class="created-date">Created:2018-04-07</span>&nbsp;&nbsp;<span class="last-modified">Last modified:2018-04-08</span></p>
<div class="catalog">
<ul class="catalogItems">
<li><a href="#mongodbIntro">Introduction</a></li>
<li><a href="#mongodbUsage">Usage of the CLI</a></li>
<li><a href="#mongodbNodeDriver">Native Node Driver</a></li>
<li><a href="#mongodbReference">References</a></li>
</ul>
</div>
<hr>
<div class="contentContainer">
<ol>
<li>
<div class="content" id="mongodbIntro">
<h3>Introduction</h3>
<p>Mongodb is a NoSQL document based database.</p>
<p>It is effectively at storing JSON document, it stores JSON in BSON (Binary JSON) format internally</p>
<div class="featureList">
<h4>Features</h4>
<ol>
<li>Supports length prefix on each value, easy to skip over a field.</li>
<li>Has knowledge about the type of a field.</li>
<li>Has additional primitive types not supported by raw JSON, like the raw binary type.</li>
</ol>
</div>
<h4>_id</h4>
<p>Every document in Mongodb must have an "_id" field that is unique. (The primary key of the document)</p>
<p>The "_id" field can be given by the Mongodb itself, which is a type of <i>ObjectId</i></p>
<pre class="brush:js">
{
    "_id":ObjectId("5aca9b5828e2f026ab1588c4")
}
</pre>
<p>A ObjectId object stores a 12 bytes data, [4 bytes timestamp in second], [3 bytes machine id], [2 bytes process id], [3 bytes increment]</p>
<p>Because more than one document can be inserted at a given second, the "increment" field will used to distinguish the documents that are inserted at the same second.</p>
</div>
<h4>Installation</h4>
<p>Go <a href="https://docs.mongodb.com/manual/administration/install-community/" target="_blank">there</a>.</p>
<h4>Start the mongodb server and client-side command line</h4>
<p><i>Start the server</i>
<pre class="brush:bash">
mongod --dbpath ~/Documents/mongodb/db/
# --dbpath specifies the location of storing the database raw data.
</pre>
</p>
<p><i>Start the command line</i>
<pre class="brush:bash">
mongo --host 127.0.0.1:27017
</pre>
</p>
</li>
<li>
<div class="content" id="mongodbUsage">
<h3>Usage of the CLI</h3>
<h4>Mongo shell variable</h4>
<div class="featureList">
<p><a href="https://docs.mongodb.com/manual/reference/mongo-shell/#command-helpers" target="_blank">Command Reference</a></p>
<ol>
<li>
show dbs # Print a list of all databases on the server
</li>
<li>
use [db] # Switch to database db. If the database does not exist, mongo will create this database.
</li>
<li>
show collections # print all collections of the current databases
</li>
</ol>
</div>
<div class="featureList">
<h4>Mongo shell variable</h4>
<p>The mongo shell provides a JS API for database operations.</p>
<p>The "db" object is set to reference the current database.</p>
<h4>db's method</h4>
<p><a href="https://docs.mongodb.com/manual/reference/mongo-shell/" target="_blank">Reference</a></p>
<ol>
<li>
db.version() # print the mongodb version
</li>
<li>
db.help()
</li>
<li>
db.[collection].help()
</li>
<li>
db.[collection].insertOne({name: "xxx"})
</li>
<li>
db.[collection].find(query, projection)
<p>query: an optional document that specifies the selection filter using "query operators". To return all documents, pass a empty filter {}</p>
<p>projection: an optional document that selects specific fields.</p>
<pre class="brush:js">
db.location.find()
{ "_id" : ObjectId("5acaab449abcaa4a50499ffe"), "city" : "minneapolis" }
{ "_id" : ObjectId("5acaacc99abcaa4a50499fff"), "price" : 1000 }
// query
db.location.find({price:{$gt: 200}})
{ "_id" : ObjectId("5acaacc99abcaa4a50499fff"), "price" : 1000 }

db.location.find({price: {$gt:800, $lt:1200}})
{ "_id" : ObjectId("5acaacc99abcaa4a50499fff"), "price" : 1000 }
// projection
// find all and show price field
db.location.find({}, {price:1})
{ "_id" : ObjectId("5acaab449abcaa4a50499ffe") }
{ "_id" : ObjectId("5acaacc99abcaa4a50499fff"), "price" : 1000 }

// find all and show all fields except city
db.location.find({}, {city:0})
{ "_id" : ObjectId("5acaab449abcaa4a50499ffe") }
{ "_id" : ObjectId("5acaacc99abcaa4a50499fff"), "price" : 1000 }

// the _id field always show, using _id:0 to explicity remove it.
</pre>
<p><a href="https://docs.mongodb.com/manual/reference/method/db.collection.find/#find-projection" target="_blank">Reference</a></p>
</li>
</ol>
</div>
</div>
</li>
</ol>
</div>
    
</body>
</html>
