<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_151) on Sun Oct 08 22:41:36 PDT 2017 -->
<title>Mongodb&nbsp;Mongoose</title>
<meta charset="utf-8">
<meta name="date" content="2018-04-07">
<meta name="keywords" content="Mongodb">
<meta name="keywords" content="Mongoose">
<meta name="keywords" content="NoSQL">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
<script type="text/javascript" src="../../syntaxHighlight_js_c/XRegExp.js"></script>
<script type="text/javascript" src="../../syntaxHighlight_js_c/shCore.js"></script>
<script type="text/javascript" src="../../syntaxHighlight_js_c/shBrushCpp.js"></script>
<script type="text/javascript" src="../../syntaxHighlight_js_c/shBrushJava.js"></script>
<script type="text/javascript" src="../../syntaxHighlight_js_c/shBrushJScript.js"></script>
<script type="text/javascript" src="../../syntaxHighlight_js_c/shBrushBash.js"></script>
<link href="../../syntaxHighlight_css_c/shCore.css" rel="stylesheet" type="text/css" />
<link href="../../syntaxHighlight_css_c/shThemeDefault.css" rel="stylesheet" type="text/css" />


</head>
<body>
<script>
SyntaxHighlighter.config.strings.expandSource = '+ expand source';
SyntaxHighlighter.config.strings.help = '?';
SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
SyntaxHighlighter.defaults['pad-line-numbers'] = false;
SyntaxHighlighter.defaults['toolbar'] = false;
SyntaxHighlighter.all()
</script>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="bar">
<strong>Mongodb&nbsp;-&nbsp;Mongoose</strong>
</div>
<p class="date"><span class="created-date">Created:2018-08-30</span>&nbsp;&nbsp;<span class="last-modified">Last modified:2018-08-30</span></p>
<div class="catalog">
<ul class="catalogItems">
<li><a href="#mongooseAPI">API</a></li>
<li><a href="#mongooseReference">References</a></li>
</ul>
</div>
<hr>
<div class="content-wrapper">
    <div id="mongooseAPI">
        <h4>API of Model</h4>
        <p>Model API can be used to create Index. Query, update, remove and create documents.</p>
        <p>Model can also create Query instance and Document instance.</p>
        <p>Suppose a schema genreDB {_id: ObjectId, field: string, name: string, contentId: ObjectId, status: number, createdAt: Date, updatedAt: Date }
        <br>contentId can be populate to another schema.
        </p>
        <ol>
            <li>
                <h5>Overview</h5>
                <a href="https://mongoosejs.com/docs/api.html#Model">Moogose API</a>
                <pre class="brush:js">
                    new Model({json doc}); // return a document instance.
                </pre>
                <pre class="brush:js">
                    Model.create({json doc}, (err, result)=>{

                    }); // Nothing returned, the result is the newly created document, can be null.
                </pre>
                <pre class="brush:js">
                    Model.insertMany([{json doc}, {json doc}], (err)=>{

                    }); // Nothing returned
                </pre>
                <pre class="brush:js">
                    Model.find***(); // return a query instance.
                </pre>
                <pre class="brush:js">
                    Model.find***(..., (err, result)=>{

                    }); // Nothing returned, the result is either a document or an array of documents. The document can be null, and the array can be empty.
                </pre>
                <pre class="brush:js">
                    Model.delete***({json condition}, (err)=>{

                    });
                </pre>
                <pre class="brush:js">
                    Model.update***({})
                </pre>
            </li>
            <li>
                <h5>Query with Model</h5>
                <p>Four types of query, query with id, query one, general query and query instance</p>
                <p>
                    1). Query with Id<br>
                    <pre class="brush:js">
                        genreDB.findById
                    </pre>
                </p>
                <p>
                    2). Query with general conditions<br>
                    <pre class="brush:js">
                        genreDB.find(condition, selected_fields, option, (err, docs)=>{

                        });
                    </pre>
                    <ol>
                        <li><span style="font-weight: bold">condition</span>: An object type used to specifiy the query criteria.
                            <br>e.g. 
                            <br>{_id: "321312342348121"}
                            <br>{field: "science", name:"calculus"}
                        </li>
                        <li><span style="font-weight: bold">selected_fields</span>: (projection) A string that specifies which fields are going to return in the query result.
                            <br>e.g. 
                            <br>"field name status"
                            <br>By default, _id is always returned even if not specified in the string.
                        </li>
                        <li><span style="font-weight: bold">option</span>: specify three optional parameters. {skip: number, limit:number, sort:{}, lean: boolean}
                            <br>e.g.
                            <br>{skip: 10, limit: 20, sort: {createdAt:-1}} 
                            <br>sort -1 usually means a decreasing order. e.g. number from big to small, date from recent to past, string from 'Z' to 'A', 
                            <br>lean: true means return a raw js object, not moogose document. (Each doc has a method that called .toObject(), which convert mongoose Document to js Object)
                        </li>
                        <li><span style="font-weight: bold">callback</span> (err, docs)
                            <br>err: if no err, err will be null. Otherwise, it is an Error instance. Important field with code: err.code and err.message.
                            <br>docs: An array of documents (Model instances), <span style="color:red">IT CAN BE AN EMPTY ARRAY</span></li>
                        </li>
                    </ol>
                </p>
            </li>
        </ol>
    </div>
</div>

</body>
</html>